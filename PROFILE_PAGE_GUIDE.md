# 个人资料页面使用指南

## 功能概述

个人资料页面允许管理员查看和编辑自己的个人信息，包括基本资料、头像和密码管理。

## 访问方式

1. 登录后台管理系统
2. 点击右上角用户头像下拉菜单
3. 选择"个人资料"选项
4. 或直接访问 `/profile` 路径

## 页面功能

### 1. 基本信息展示

左侧卡片显示：
- **用户头像**：当前用户头像，支持点击更换
- **用户名**：当前登录用户名
- **角色标签**：显示用户角色（管理员/用户）
- **用户ID**：系统分配的唯一标识
- **注册时间**：账户创建时间
- **最后登录**：最近一次登录时间

### 2. 编辑个人资料

右侧上方卡片提供：
- **用户名修改**：更新显示名称
- **邮箱修改**：更新联系邮箱
- **保存按钮**：提交修改
- **重置按钮**：恢复到原始值

#### 验证规则
- 用户名：2-20个字符
- 邮箱：必须是有效的邮箱格式
- 不能与其他用户重复

### 3. 修改密码

右侧下方卡片提供：
- **当前密码**：验证身份
- **新密码**：设置新密码（至少6个字符）
- **确认密码**：确保密码输入正确
- **修改密码按钮**：提交密码更改
- **重置按钮**：清空表单

### 4. 头像管理

点击头像右下角的相机图标：
- **上传新头像**：支持拖拽或点击上传
- **文件格式**：支持 JPG、PNG 格式
- **文件大小**：不超过 5MB
- **自动更新**：上传成功后自动刷新显示

## API接口

### 后端接口

1. **获取用户信息**
   - `GET /auth/profile`
   - 返回当前用户的详细信息

2. **更新个人资料**
   - `PUT /user/profile`
   - 更新用户名和邮箱

3. **修改密码**
   - `PUT /user/password`
   - 验证当前密码并设置新密码

4. **上传头像**
   - `POST /user/avatar`
   - 上传用户头像文件

### 前端API调用

```javascript
// 获取用户信息
const userInfo = await authAPI.getUserInfo()

// 更新个人资料
const result = await authAPI.updateProfile({
  username: 'newname',
  email: 'new@email.com'
})

// 修改密码
const result = await authAPI.changePassword({
  currentPassword: 'oldpass',
  newPassword: 'newpass'
})
```

## 使用流程

### 修改个人资料
1. 在编辑资料卡片中修改用户名或邮箱
2. 点击"保存修改"按钮
3. 系统验证信息有效性
4. 成功后显示成功提示并刷新信息

### 修改密码
1. 在修改密码卡片中输入当前密码
2. 输入新密码（至少6个字符）
3. 确认新密码
4. 点击"修改密码"按钮
5. 系统验证当前密码正确性
6. 成功后显示成功提示并清空表单

### 更换头像
1. 点击头像右下角的相机图标
2. 在弹出的对话框中选择图片文件
3. 支持拖拽上传或点击选择
4. 系统自动验证文件格式和大小
5. 上传成功后自动更新头像显示

## 错误处理

- **网络错误**：显示网络连接失败提示
- **验证失败**：显示具体的验证错误信息
- **权限错误**：显示权限不足提示
- **文件错误**：显示文件格式或大小错误

## 安全特性

- **密码验证**：修改密码需要验证当前密码
- **唯一性检查**：用户名和邮箱不能与其他用户重复
- **文件验证**：头像上传有格式和大小限制
- **权限控制**：只能修改自己的信息

## 技术实现

- **前端框架**：Vue 3 + Element Plus
- **状态管理**：Pinia
- **路由管理**：Vue Router
- **HTTP客户端**：Axios
- **文件上传**：Element Plus Upload组件

## 注意事项

1. 修改个人资料后会自动更新导航栏显示的用户信息
2. 密码修改成功后建议重新登录以确保安全
3. 头像上传支持实时预览和自动更新
4. 所有修改操作都有实时验证和错误提示
5. 页面支持响应式布局，适配不同屏幕尺寸
