# ğŸš€ åç«¯APIå®ç°éœ€æ±‚æ¸…å•

æ ¹æ®å½“å‰å‰ç«¯ç®¡ç†åå°çš„åŠŸèƒ½ï¼Œæ‚¨éœ€è¦åœ¨åç«¯å®ç°ä»¥ä¸‹APIæ¥å£ï¼š

## ğŸ“Š 1. ä»ªè¡¨ç›˜ç»Ÿè®¡æ¨¡å—

### 1.1 è·å–ç»Ÿè®¡æ•°æ®
```
GET /admin/dashboard/stats
```
**åŠŸèƒ½**: è·å–ç³»ç»Ÿæ€»ä½“ç»Ÿè®¡æ•°æ®  
**è¿”å›æ•°æ®æ ¼å¼**:
```json
{
  "success": true,
  "data": {
    "totalUsers": 1250,        // æ€»ç”¨æˆ·æ•°
    "totalImages": 8960,       // æ€»å›¾ç‰‡æ•°
    "todayImages": 156,        // ä»Šæ—¥ç”Ÿæˆå›¾ç‰‡æ•°
    "activeUsers": 89          // æ´»è·ƒç”¨æˆ·æ•°
  }
}
```

### 1.2 è·å–ç”¨æˆ·å¢é•¿è¶‹åŠ¿
```
GET /admin/dashboard/user-growth?days=7
```
**åŠŸèƒ½**: è·å–æŒ‡å®šå¤©æ•°å†…çš„ç”¨æˆ·å¢é•¿è¶‹åŠ¿  
**å‚æ•°**: 
- `days`: å¤©æ•° (é»˜è®¤7å¤©)
- `period`: æ—¶é—´å‘¨æœŸ (å¯é€‰: day, week, month)

**è¿”å›æ•°æ®æ ¼å¼**:
```json
{
  "success": true,
  "data": [
    {
      "date": "2024-01-15",
      "count": 25
    },
    {
      "date": "2024-01-16", 
      "count": 32
    }
    // ... æ›´å¤šæ•°æ®
  ]
}
```

### 1.3 è·å–å›¾ç‰‡ç”Ÿæˆè¶‹åŠ¿
```
GET /admin/dashboard/image-trends?days=7
```
**åŠŸèƒ½**: è·å–æŒ‡å®šå¤©æ•°å†…çš„å›¾ç‰‡ç”Ÿæˆè¶‹åŠ¿  
**å‚æ•°**: 
- `days`: å¤©æ•° (é»˜è®¤7å¤©)
- `period`: æ—¶é—´å‘¨æœŸ (å¯é€‰: day, week, month)

**è¿”å›æ•°æ®æ ¼å¼**:
```json
{
  "success": true,
  "data": [
    {
      "date": "2024-01-15",
      "count": 156
    },
    {
      "date": "2024-01-16",
      "count": 189
    }
    // ... æ›´å¤šæ•°æ®
  ]
}
```

### 1.4 è·å–çƒ­é—¨æç¤ºè¯
```
GET /admin/dashboard/popular-prompts?limit=5&days=7
```
**åŠŸèƒ½**: è·å–çƒ­é—¨æç¤ºè¯åˆ—è¡¨  
**å‚æ•°**: 
- `limit`: é™åˆ¶æ•°é‡ (é»˜è®¤5)
- `days`: ç»Ÿè®¡å¤©æ•° (é»˜è®¤7å¤©)

**è¿”å›æ•°æ®æ ¼å¼**:
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "text": "ç¾ä¸½çš„é£æ™¯ç”»",
      "count": 156
    },
    {
      "id": 2,
      "text": "å¯çˆ±çš„å°çŒ«",
      "count": 142
    }
    // ... æ›´å¤šæ•°æ®
  ]
}
```

## ğŸ‘¥ 2. ç”¨æˆ·ç®¡ç†æ¨¡å—

### 2.1 è·å–ç”¨æˆ·åˆ—è¡¨ (ç®¡ç†å‘˜)
```
GET /admin/users?page=1&pageSize=10&keyword=&status=&role=
```
**åŠŸèƒ½**: è·å–ç”¨æˆ·åˆ—è¡¨ (ç®¡ç†å‘˜æƒé™)  
**å‚æ•°**: 
- `page`: é¡µç  (é»˜è®¤1)
- `pageSize`: æ¯é¡µæ•°é‡ (é»˜è®¤10)
- `keyword`: æœç´¢å…³é”®è¯ (å¯é€‰)
- `status`: ç”¨æˆ·çŠ¶æ€ç­›é€‰ (å¯é€‰: active, inactive, banned)
- `role`: è§’è‰²ç­›é€‰ (å¯é€‰: user, admin)

**è¿”å›æ•°æ®æ ¼å¼**:
```json
{
  "success": true,
  "data": {
    "list": [
      {
        "id": 1,
        "username": "user001",
        "email": "user001@example.com",
        "avatar": "https://example.com/avatar1.jpg",
        "role": "user",
        "status": "active",
        "createdAt": "2024-01-15T10:30:00Z",
        "lastLoginAt": "2024-01-16T09:15:00Z"
      }
      // ... æ›´å¤šç”¨æˆ·
    ],
    "total": 1250,
    "page": 1,
    "pageSize": 10,
    "totalPages": 125
  }
}
```

### 2.2 è·å–ç”¨æˆ·è¯¦æƒ… (ç®¡ç†å‘˜)
```
GET /admin/users/{id}
```
**åŠŸèƒ½**: è·å–æŒ‡å®šç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯  

### 2.3 åˆ›å»ºç”¨æˆ· (ç®¡ç†å‘˜)
```
POST /admin/users
```
**åŠŸèƒ½**: åˆ›å»ºæ–°ç”¨æˆ·  
**è¯·æ±‚ä½“**:
```json
{
  "username": "newuser",
  "email": "newuser@example.com",
  "password": "password123",
  "role": "user",
  "status": "active"
}
```

### 2.4 æ›´æ–°ç”¨æˆ· (ç®¡ç†å‘˜)
```
PUT /admin/users/{id}
```
**åŠŸèƒ½**: æ›´æ–°ç”¨æˆ·ä¿¡æ¯  

### 2.5 åˆ é™¤ç”¨æˆ· (ç®¡ç†å‘˜)
```
DELETE /admin/users/{id}
```
**åŠŸèƒ½**: åˆ é™¤æŒ‡å®šç”¨æˆ·  

### 2.6 æ‰¹é‡åˆ é™¤ç”¨æˆ· (ç®¡ç†å‘˜)
```
POST /admin/users/batch-delete
```
**åŠŸèƒ½**: æ‰¹é‡åˆ é™¤ç”¨æˆ·  
**è¯·æ±‚ä½“**:
```json
{
  "userIds": [1, 2, 3, 4, 5]
}
```

## ğŸ–¼ï¸ 3. å›¾ç‰‡ç®¡ç†æ¨¡å—

### 3.1 è·å–å›¾ç‰‡åˆ—è¡¨ (ç®¡ç†å‘˜)
```
GET /admin/images?page=1&pageSize=10&keyword=&status=&userId=
```
**åŠŸèƒ½**: è·å–å›¾ç‰‡åˆ—è¡¨ (ç®¡ç†å‘˜æƒé™)  
**å‚æ•°**: 
- `page`: é¡µç 
- `pageSize`: æ¯é¡µæ•°é‡
- `keyword`: æœç´¢å…³é”®è¯
- `status`: å›¾ç‰‡çŠ¶æ€ç­›é€‰
- `userId`: ç”¨æˆ·IDç­›é€‰

**è¿”å›æ•°æ®æ ¼å¼**:
```json
{
  "success": true,
  "data": {
    "list": [
      {
        "id": 1,
        "userId": 123,
        "prompt": "ç¾ä¸½çš„é£æ™¯ç”»",
        "imageUrl": "https://example.com/image1.jpg",
        "model": "Kwai-Kolors/Kolors",
        "imageSize": "1280x1280",
        "status": "published",
        "createdAt": "2024-01-15T10:30:00Z",
        "user": {
          "id": 123,
          "username": "user001"
        }
      }
      // ... æ›´å¤šå›¾ç‰‡
    ],
    "total": 8960,
    "page": 1,
    "pageSize": 10
  }
}
```

### 3.2 è·å–å›¾ç‰‡è¯¦æƒ… (ç®¡ç†å‘˜)
```
GET /admin/images/{id}
```

### 3.3 åˆ é™¤å›¾ç‰‡ (ç®¡ç†å‘˜)
```
DELETE /admin/images/{id}
```

### 3.4 æ‰¹é‡åˆ é™¤å›¾ç‰‡ (ç®¡ç†å‘˜)
```
POST /admin/images/batch-delete
```
**è¯·æ±‚ä½“**:
```json
{
  "imageIds": [1, 2, 3, 4, 5]
}
```

## ğŸ¨ 4. å›¾ç‰‡ç”Ÿæˆæ¨¡å—

### 4.1 ç”Ÿæˆå›¾ç‰‡
```
POST /generate-image
```
**åŠŸèƒ½**: ç”Ÿæˆå›¾ç‰‡  
**è¯·æ±‚ä½“**:
```json
{
  "prompt": "ç¾ä¸½çš„é£æ™¯ç”»",
  "model": "Kwai-Kolors/Kolors",
  "image_size": "1280x1280",
  "batch_size": 1
}
```

### 4.2 è·å–ç”¨æˆ·å›¾ç‰‡å†å²
```
GET /user/images?page=1&pageSize=10&keyword=
```
**åŠŸèƒ½**: è·å–å½“å‰ç”¨æˆ·çš„å›¾ç‰‡ç”Ÿæˆå†å²  

## ğŸ” 5. è®¤è¯æ¨¡å—

### 5.1 ç®¡ç†å‘˜ç™»å½•
```
POST /auth/login
```
**è¯·æ±‚ä½“**:
```json
{
  "username": "admin",
  "password": "password123"
}
```

**è¿”å›æ•°æ®æ ¼å¼**:
```json
{
  "success": true,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": 1,
      "username": "admin",
      "email": "admin@example.com",
      "role": "admin"
    }
  }
}
```

### 5.2 ç”¨æˆ·æ³¨å†Œ
```
POST /auth/register
```

### 5.3 è·å–ç”¨æˆ·ä¿¡æ¯
```
GET /user/profile
```

### 5.4 éªŒè¯ç®¡ç†å‘˜ä»¤ç‰Œ
```
POST /auth/validate-token
```

## âš™ï¸ 6. ç³»ç»Ÿç®¡ç†æ¨¡å—

### 6.1 è·å–ç³»ç»Ÿä¿¡æ¯
```
GET /admin/system/info
```

### 6.2 è·å–ç³»ç»Ÿé…ç½®
```
GET /admin/system/config
```

### 6.3 æ›´æ–°ç³»ç»Ÿé…ç½®
```
PUT /admin/system/config
```

### 6.4 æ¸…ç†ç³»ç»Ÿç¼“å­˜
```
POST /admin/system/clear-cache
```

## ğŸ“ 7. æ–‡ä»¶ä¸Šä¼ æ¨¡å—

### 7.1 ä¸Šä¼ å¤´åƒ
```
POST /upload/avatar
```
**Content-Type**: multipart/form-data  
**å­—æ®µ**: avatar (æ–‡ä»¶)

### 7.2 é€šç”¨æ–‡ä»¶ä¸Šä¼ 
```
POST /upload/file
```
**Content-Type**: multipart/form-data  
**å­—æ®µ**: 
- file (æ–‡ä»¶)
- type (æ–‡ä»¶ç±»å‹: avatar, document, image)

## ğŸ”§ é€šç”¨å“åº”æ ¼å¼

æ‰€æœ‰APIæ¥å£éƒ½åº”è¯¥è¿”å›ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼š

### æˆåŠŸå“åº”
```json
{
  "success": true,
  "data": {}, // å…·ä½“æ•°æ®
  "message": "æ“ä½œæˆåŠŸ"
}
```

### é”™è¯¯å“åº”
```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "é”™è¯¯æè¿°"
  }
}
```

## ğŸ”‘ è®¤è¯è¯´æ˜

- ç®¡ç†å‘˜æ¥å£ (`/admin/*`) éœ€è¦ç®¡ç†å‘˜æƒé™éªŒè¯
- æ™®é€šç”¨æˆ·æ¥å£éœ€è¦ç”¨æˆ·ç™»å½•éªŒè¯
- å…¬å¼€æ¥å£æ— éœ€è®¤è¯
- ä½¿ç”¨ JWT Token è¿›è¡Œèº«ä»½éªŒè¯
- Token åº”åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦: `Authorization: Bearer <token>`

## ğŸ“ ä¼˜å…ˆçº§å»ºè®®

å»ºè®®æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§å®ç°ï¼š

1. **é«˜ä¼˜å…ˆçº§** (ä»ªè¡¨ç›˜æ˜¾ç¤ºéœ€è¦):
   - ä»ªè¡¨ç›˜ç»Ÿè®¡æ¨¡å— (1.1-1.4)
   - ç”¨æˆ·ç®¡ç†åŸºç¡€æ¥å£ (2.1, 2.2)
   - è®¤è¯æ¨¡å— (5.1, 5.3)

2. **ä¸­ä¼˜å…ˆçº§**:
   - å›¾ç‰‡ç®¡ç†æ¨¡å— (3.1-3.4)
   - å›¾ç‰‡ç”Ÿæˆæ¨¡å— (4.1, 4.2)

3. **ä½ä¼˜å…ˆçº§**:
   - ç³»ç»Ÿç®¡ç†æ¨¡å— (6.1-6.4)
   - æ–‡ä»¶ä¸Šä¼ æ¨¡å— (7.1-7.2)

å®ç°è¿™äº›æ¥å£åï¼Œå‰ç«¯ç®¡ç†åå°å°±èƒ½æ­£å¸¸æ˜¾ç¤ºæ•°æ®å’Œæä¾›å®Œæ•´çš„ç®¡ç†åŠŸèƒ½äº†ï¼