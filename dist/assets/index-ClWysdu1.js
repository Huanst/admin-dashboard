import{g as B,O as R,b as O,ad as z,aa as F,P as M,d as J,a9 as D,e as h,f as j,L as K,M as W,J as Y,ab as Q,ae as $,E as x,y as S}from"./element-plus-wIhg9Y3M.js";import{s as E}from"./api-D78is_CB.js";import{bL as C,bu as L,cl as q,bQ as G,bT as H,bV as d,cb as e,c4 as a,c8 as p,bw as A,bU as I,c3 as X}from"./vendor-CXaOXOXP.js";import{_ as Z}from"./index-BLw7aUal.js";const ee={class:"system-config"},le={class:"page-header"},ae={class:"header-right"},te={class:"config-content"},oe={class:"card-header"},se={class:"card-header"},ne={class:"card-header"},de={class:"card-header"},ie={class:"card-header"},ue=C({__name:"Config",setup(N){const b=L(!1),t=q({basic:{systemName:"AI 图片生成系统",version:"1.0.0",adminEmail:"admin@example.com",timezone:"Asia/Shanghai",description:"基于 AI 的图片生成系统，支持多种模型和自定义提示词"},image:{apiUrl:"https://api.openai.com/v1",apiKey:"",defaultModel:"dall-e-3",defaultSize:"1024x1024",timeout:60,maxRetries:3},limits:{dailyLimit:50,hourlyLimit:10,maxPromptLength:500,imageRetentionDays:30,allowRegistration:!0},storage:{type:"local",path:"/uploads",domain:"http://localhost:5004",maxFileSize:10},security:{jwtSecret:"",tokenExpiry:24,minPasswordLength:8,maxLoginAttempts:5,enableContentFilter:!0}}),c=L({}),k=async()=>{try{const u=await E.getConfig();u.success&&u.data&&(Object.assign(t,u.data),c.value=JSON.parse(JSON.stringify(t)))}catch(u){x.error("加载配置失败"),console.error("加载配置失败:",u)}},P=async()=>{try{await S.confirm("确定要保存配置吗？部分配置可能需要重启系统才能生效。","确认保存",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),b.value=!0,(await E.updateConfig(t)).success&&(x.success("配置保存成功"),c.value=JSON.parse(JSON.stringify(t)))}catch(u){u!=="cancel"&&(x.error("保存配置失败"),console.error("保存配置失败:",u))}finally{b.value=!1}},T=async()=>{try{await S.confirm("确定要重置配置吗？所有未保存的修改将丢失。","确认重置",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),Object.assign(t,c.value),x.success("配置已重置")}catch{}};return G(()=>{k()}),(u,l)=>{const v=B,w=O,_=Y,r=j,n=h,s=F,i=W,y=K,f=D,g=J,V=M,m=Q,U=$;return I(),H("div",ee,[d("div",le,[l[27]||(l[27]=d("div",{class:"header-left"},[d("h2",{class:"page-title"},"系统配置"),d("p",{class:"page-description"},"管理系统的各项配置参数")],-1)),d("div",ae,[e(w,{onClick:T},{default:a(()=>[e(v,null,{default:a(()=>[e(A(R))]),_:1}),l[25]||(l[25]=p(" 重置 "))]),_:1,__:[25]}),e(w,{type:"primary",onClick:P,loading:b.value},{default:a(()=>[e(v,null,{default:a(()=>[e(A(z))]),_:1}),l[26]||(l[26]=p(" 保存配置 "))]),_:1,__:[26]},8,["loading"])])]),d("div",te,[e(f,{gutter:24},{default:a(()=>[e(s,{span:24},{default:a(()=>[e(V,{class:"config-card",shadow:"never"},{header:a(()=>[d("div",oe,[l[29]||(l[29]=d("h3",null,"基础配置",-1)),e(_,{type:"info"},{default:a(()=>l[28]||(l[28]=[p("系统基本设置")])),_:1,__:[28]})])]),default:a(()=>[e(g,{model:t.basic,"label-width":"120px",class:"config-form"},{default:a(()=>[e(f,{gutter:24},{default:a(()=>[e(s,{span:12},{default:a(()=>[e(n,{label:"系统名称"},{default:a(()=>[e(r,{modelValue:t.basic.systemName,"onUpdate:modelValue":l[0]||(l[0]=o=>t.basic.systemName=o),placeholder:"请输入系统名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"系统版本"},{default:a(()=>[e(r,{modelValue:t.basic.version,"onUpdate:modelValue":l[1]||(l[1]=o=>t.basic.version=o),placeholder:"请输入版本号",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"管理员邮箱"},{default:a(()=>[e(r,{modelValue:t.basic.adminEmail,"onUpdate:modelValue":l[2]||(l[2]=o=>t.basic.adminEmail=o),placeholder:"请输入管理员邮箱"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"系统时区"},{default:a(()=>[e(y,{modelValue:t.basic.timezone,"onUpdate:modelValue":l[3]||(l[3]=o=>t.basic.timezone=o),placeholder:"请选择时区"},{default:a(()=>[e(i,{label:"Asia/Shanghai",value:"Asia/Shanghai"}),e(i,{label:"UTC",value:"UTC"}),e(i,{label:"America/New_York",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(n,{label:"系统描述"},{default:a(()=>[e(r,{modelValue:t.basic.description,"onUpdate:modelValue":l[4]||(l[4]=o=>t.basic.description=o),type:"textarea",rows:3,placeholder:"请输入系统描述"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(V,{class:"config-card",shadow:"never"},{header:a(()=>[d("div",se,[l[31]||(l[31]=d("h3",null,"图片生成配置",-1)),e(_,{type:"primary"},{default:a(()=>l[30]||(l[30]=[p("AI 图片生成相关设置")])),_:1,__:[30]})])]),default:a(()=>[e(g,{model:t.image,"label-width":"120px",class:"config-form"},{default:a(()=>[e(f,{gutter:24},{default:a(()=>[e(s,{span:12},{default:a(()=>[e(n,{label:"API 地址"},{default:a(()=>[e(r,{modelValue:t.image.apiUrl,"onUpdate:modelValue":l[5]||(l[5]=o=>t.image.apiUrl=o),placeholder:"请输入 API 地址"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"API 密钥"},{default:a(()=>[e(r,{modelValue:t.image.apiKey,"onUpdate:modelValue":l[6]||(l[6]=o=>t.image.apiKey=o),type:"password",placeholder:"请输入 API 密钥","show-password":""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"默认模型"},{default:a(()=>[e(y,{modelValue:t.image.defaultModel,"onUpdate:modelValue":l[7]||(l[7]=o=>t.image.defaultModel=o),placeholder:"请选择默认模型"},{default:a(()=>[e(i,{label:"DALL-E 3",value:"dall-e-3"}),e(i,{label:"DALL-E 2",value:"dall-e-2"}),e(i,{label:"Stable Diffusion",value:"stable-diffusion"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"默认尺寸"},{default:a(()=>[e(y,{modelValue:t.image.defaultSize,"onUpdate:modelValue":l[8]||(l[8]=o=>t.image.defaultSize=o),placeholder:"请选择默认尺寸"},{default:a(()=>[e(i,{label:"1024x1024",value:"1024x1024"}),e(i,{label:"1024x1792",value:"1024x1792"}),e(i,{label:"1792x1024",value:"1792x1024"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"请求超时"},{default:a(()=>[e(m,{modelValue:t.image.timeout,"onUpdate:modelValue":l[9]||(l[9]=o=>t.image.timeout=o),min:10,max:300,step:10,"controls-position":"right"},null,8,["modelValue"]),l[32]||(l[32]=d("span",{class:"form-unit"},"秒",-1))]),_:1,__:[32]})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"最大重试次数"},{default:a(()=>[e(m,{modelValue:t.image.maxRetries,"onUpdate:modelValue":l[10]||(l[10]=o=>t.image.maxRetries=o),min:0,max:10,"controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(V,{class:"config-card",shadow:"never"},{header:a(()=>[d("div",ne,[l[34]||(l[34]=d("h3",null,"用户限制配置",-1)),e(_,{type:"warning"},{default:a(()=>l[33]||(l[33]=[p("用户使用限制设置")])),_:1,__:[33]})])]),default:a(()=>[e(g,{model:t.limits,"label-width":"120px",class:"config-form"},{default:a(()=>[e(f,{gutter:24},{default:a(()=>[e(s,{span:12},{default:a(()=>[e(n,{label:"每日生成限制"},{default:a(()=>[e(m,{modelValue:t.limits.dailyLimit,"onUpdate:modelValue":l[11]||(l[11]=o=>t.limits.dailyLimit=o),min:1,max:1e3,"controls-position":"right"},null,8,["modelValue"]),l[35]||(l[35]=d("span",{class:"form-unit"},"张/天",-1))]),_:1,__:[35]})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"每小时限制"},{default:a(()=>[e(m,{modelValue:t.limits.hourlyLimit,"onUpdate:modelValue":l[12]||(l[12]=o=>t.limits.hourlyLimit=o),min:1,max:100,"controls-position":"right"},null,8,["modelValue"]),l[36]||(l[36]=d("span",{class:"form-unit"},"张/小时",-1))]),_:1,__:[36]})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"提示词最大长度"},{default:a(()=>[e(m,{modelValue:t.limits.maxPromptLength,"onUpdate:modelValue":l[13]||(l[13]=o=>t.limits.maxPromptLength=o),min:10,max:2e3,step:10,"controls-position":"right"},null,8,["modelValue"]),l[37]||(l[37]=d("span",{class:"form-unit"},"字符",-1))]),_:1,__:[37]})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"图片保存天数"},{default:a(()=>[e(m,{modelValue:t.limits.imageRetentionDays,"onUpdate:modelValue":l[14]||(l[14]=o=>t.limits.imageRetentionDays=o),min:1,max:365,"controls-position":"right"},null,8,["modelValue"]),l[38]||(l[38]=d("span",{class:"form-unit"},"天",-1))]),_:1,__:[38]})]),_:1}),e(s,{span:24},{default:a(()=>[e(n,{label:"启用用户注册"},{default:a(()=>[e(U,{modelValue:t.limits.allowRegistration,"onUpdate:modelValue":l[15]||(l[15]=o=>t.limits.allowRegistration=o),"active-text":"允许","inactive-text":"禁止"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(V,{class:"config-card",shadow:"never"},{header:a(()=>[d("div",de,[l[40]||(l[40]=d("h3",null,"存储配置",-1)),e(_,{type:"success"},{default:a(()=>l[39]||(l[39]=[p("文件存储相关设置")])),_:1,__:[39]})])]),default:a(()=>[e(g,{model:t.storage,"label-width":"120px",class:"config-form"},{default:a(()=>[e(f,{gutter:24},{default:a(()=>[e(s,{span:12},{default:a(()=>[e(n,{label:"存储类型"},{default:a(()=>[e(y,{modelValue:t.storage.type,"onUpdate:modelValue":l[16]||(l[16]=o=>t.storage.type=o),placeholder:"请选择存储类型"},{default:a(()=>[e(i,{label:"本地存储",value:"local"}),e(i,{label:"阿里云 OSS",value:"aliyun"}),e(i,{label:"腾讯云 COS",value:"tencent"}),e(i,{label:"AWS S3",value:"aws"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"存储路径"},{default:a(()=>[e(r,{modelValue:t.storage.path,"onUpdate:modelValue":l[17]||(l[17]=o=>t.storage.path=o),placeholder:"请输入存储路径"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"访问域名"},{default:a(()=>[e(r,{modelValue:t.storage.domain,"onUpdate:modelValue":l[18]||(l[18]=o=>t.storage.domain=o),placeholder:"请输入访问域名"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"最大文件大小"},{default:a(()=>[e(m,{modelValue:t.storage.maxFileSize,"onUpdate:modelValue":l[19]||(l[19]=o=>t.storage.maxFileSize=o),min:1,max:100,"controls-position":"right"},null,8,["modelValue"]),l[41]||(l[41]=d("span",{class:"form-unit"},"MB",-1))]),_:1,__:[41]})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),e(s,{span:24},{default:a(()=>[e(V,{class:"config-card",shadow:"never"},{header:a(()=>[d("div",ie,[l[43]||(l[43]=d("h3",null,"安全配置",-1)),e(_,{type:"danger"},{default:a(()=>l[42]||(l[42]=[p("系统安全相关设置")])),_:1,__:[42]})])]),default:a(()=>[e(g,{model:t.security,"label-width":"120px",class:"config-form"},{default:a(()=>[e(f,{gutter:24},{default:a(()=>[e(s,{span:12},{default:a(()=>[e(n,{label:"JWT 密钥"},{default:a(()=>[e(r,{modelValue:t.security.jwtSecret,"onUpdate:modelValue":l[20]||(l[20]=o=>t.security.jwtSecret=o),type:"password",placeholder:"请输入 JWT 密钥","show-password":""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"Token 有效期"},{default:a(()=>[e(m,{modelValue:t.security.tokenExpiry,"onUpdate:modelValue":l[21]||(l[21]=o=>t.security.tokenExpiry=o),min:1,max:168,"controls-position":"right"},null,8,["modelValue"]),l[44]||(l[44]=d("span",{class:"form-unit"},"小时",-1))]),_:1,__:[44]})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"密码最小长度"},{default:a(()=>[e(m,{modelValue:t.security.minPasswordLength,"onUpdate:modelValue":l[22]||(l[22]=o=>t.security.minPasswordLength=o),min:6,max:20,"controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(n,{label:"登录失败限制"},{default:a(()=>[e(m,{modelValue:t.security.maxLoginAttempts,"onUpdate:modelValue":l[23]||(l[23]=o=>t.security.maxLoginAttempts=o),min:3,max:10,"controls-position":"right"},null,8,["modelValue"]),l[45]||(l[45]=d("span",{class:"form-unit"},"次",-1))]),_:1,__:[45]})]),_:1}),e(s,{span:24},{default:a(()=>[e(n,{label:"启用内容审核"},{default:a(()=>[e(U,{modelValue:t.security.enableContentFilter,"onUpdate:modelValue":l[24]||(l[24]=o=>t.security.enableContentFilter=o),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})])])}}}),me=Z(ue,[["__scopeId","data-v-7099c901"]]),ge=C({__name:"index",setup(N){return(b,t)=>(I(),X(me))}});export{ge as default};
