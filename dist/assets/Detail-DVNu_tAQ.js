import{E as u,_ as Q,b as $,$ as J,Q as j,a0 as q,B as G,g as H,u as C,J as K,P as W,a1 as X,a2 as Y,s as I,p as Z,y as tt}from"./element-plus-wIhg9Y3M.js";import{bu as b,dU as st,bQ as et,dT as at,bT as r,bV as t,cb as a,c4 as o,c8 as _,bw as c,c9 as n,ca as ot,cD as lt,c3 as nt,c7 as it,bU as d}from"./vendor-CXaOXOXP.js";import{u as B}from"./api-D78is_CB.js";import{f as k}from"./index-zFB-kJVX.js";import{_ as dt}from"./index-BLw7aUal.js";const rt={class:"user-detail-container"},ct={class:"page-header"},ut={class:"header-left"},_t={class:"header-right"},vt={key:0,class:"loading-container"},pt={key:1,class:"user-detail-content"},mt={class:"user-basic-info"},ft={class:"avatar-section"},gt={class:"status-badge"},yt={class:"info-section"},bt={class:"info-grid"},kt={class:"info-item"},ht={class:"info-item"},Et={class:"info-item"},wt={class:"info-item"},At={class:"info-item"},Dt={class:"info-item"},xt={class:"stats-grid"},Ct={class:"stat-item"},It={class:"stat-value"},Bt={class:"stat-item"},Mt={class:"stat-value"},Tt={class:"stat-item"},St={class:"stat-value"},Ut={class:"stat-item"},Nt={class:"stat-value"},Vt={class:"card-header"},Ft={class:"activity-list"},Lt={key:0,class:"empty-state"},Rt={key:1},zt={class:"activity-icon"},Ot={class:"activity-content"},Pt={class:"activity-title"},Qt={class:"activity-desc"},$t={class:"activity-time"},Jt={key:2,class:"error-state"},jt={__name:"Detail",setup(qt){const M=st(),p=at(),m=b(!0),e=b(null),f=b([]),g=Number(M.params.id),h=()=>{p.go(-1)},T=l=>({active:"正常",disabled:"已禁用",inactive:"未激活"})[l]||l,S=l=>({login:C,generate:Z,setting:I})[l]||I,U=l=>({login:"#67C23A",generate:"#409EFF",setting:"#E6A23C"})[l]||"#909399",E=async()=>{try{m.value=!0;const l=await B.getUserDetail(g);e.value=l.data,f.value=[{id:1,type:"login",title:"用户登录",description:"从 192.168.1.100 登录系统",createdAt:new Date().toISOString()},{id:2,type:"generate",title:"生成图片",description:'使用提示词"美丽的风景"生成了一张图片',createdAt:new Date(Date.now()-36e5).toISOString()}]}catch(l){console.error("加载用户详情失败:",l),u.error("加载用户详情失败")}finally{m.value=!1}},N=()=>{u.info("编辑功能开发中...")},V=async()=>{var l;try{await tt.confirm(`确定要删除用户 "${(l=e.value)==null?void 0:l.username}" 吗？此操作不可恢复。`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await B.deleteUser(g),u.success("删除成功"),p.push("/users")}catch(s){s!=="cancel"&&(console.error("删除用户失败:",s),u.error("删除用户失败"))}},F=()=>{u.success("活动记录已刷新"),E()};return et(()=>{g?E():(u.error("用户ID无效"),p.push("/users"))}),(l,s)=>{const v=$,L=q,w=H,R=G,z=K,y=W,O=X,P=Y;return d(),r("div",rt,[t("div",ct,[t("div",ut,[a(v,{onClick:h,icon:c(Q)},{default:o(()=>s[0]||(s[0]=[_("返回")])),_:1,__:[0]},8,["icon"]),s[1]||(s[1]=t("h1",null,"用户详情",-1))]),t("div",_t,[a(v,{type:"primary",onClick:N,icon:c(J)},{default:o(()=>s[2]||(s[2]=[_("编辑用户")])),_:1,__:[2]},8,["icon"]),a(v,{type:"danger",onClick:V,icon:c(j)},{default:o(()=>s[3]||(s[3]=[_("删除用户")])),_:1,__:[3]},8,["icon"])])]),m.value?(d(),r("div",vt,[a(L,{rows:8,animated:""})])):e.value?(d(),r("div",pt,[a(y,{class:"info-card"},{header:o(()=>s[4]||(s[4]=[t("div",{class:"card-header"},[t("span",null,"基本信息")],-1)])),default:o(()=>[t("div",mt,[t("div",ft,[a(R,{size:120,src:e.value.avatar},{default:o(()=>[a(w,{size:"60"},{default:o(()=>[a(c(C))]),_:1})]),_:1},8,["src"]),t("div",gt,[a(z,{type:e.value.status==="active"?"success":e.value.status==="disabled"?"danger":"warning",class:"status-badge"},{default:o(()=>[_(n(T(e.value.status)),1)]),_:1},8,["type"])])]),t("div",yt,[t("div",bt,[t("div",kt,[s[5]||(s[5]=t("label",null,"用户名",-1)),t("span",null,n(e.value.username),1)]),t("div",ht,[s[6]||(s[6]=t("label",null,"邮箱",-1)),t("span",null,n(e.value.email),1)]),t("div",Et,[s[7]||(s[7]=t("label",null,"手机号",-1)),t("span",null,n(e.value.email||"未设置"),1)]),t("div",wt,[s[8]||(s[8]=t("label",null,"用户ID",-1)),t("span",null,n(e.value.id),1)]),t("div",At,[s[9]||(s[9]=t("label",null,"注册时间",-1)),t("span",null,n(c(k)(e.value.createdAt)),1)]),t("div",Dt,[s[10]||(s[10]=t("label",null,"最后登录",-1)),t("span",null,n(e.value.lastLoginAt?c(k)(e.value.lastLoginAt):"从未登录"),1)])])])])]),_:1}),a(y,{class:"stats-card"},{header:o(()=>s[11]||(s[11]=[t("div",{class:"card-header"},[t("span",null,"使用统计")],-1)])),default:o(()=>{var i,A,D,x;return[t("div",xt,[t("div",Ct,[t("div",It,n(((i=e.value.stats)==null?void 0:i.totalImages)||0),1),s[12]||(s[12]=t("div",{class:"stat-label"},"生成图片总数",-1))]),t("div",Bt,[t("div",Mt,n(((A=e.value.stats)==null?void 0:A.todayImages)||0),1),s[13]||(s[13]=t("div",{class:"stat-label"},"今日生成",-1))]),t("div",Tt,[t("div",St,n(((D=e.value.stats)==null?void 0:D.totalTokens)||0),1),s[14]||(s[14]=t("div",{class:"stat-label"},"消耗积分",-1))]),t("div",Ut,[t("div",Nt,n(((x=e.value.stats)==null?void 0:x.remainingTokens)||0),1),s[15]||(s[15]=t("div",{class:"stat-label"},"剩余积分",-1))])])]}),_:1}),a(y,{class:"activity-card"},{header:o(()=>[t("div",Vt,[s[17]||(s[17]=t("span",null,"最近活动",-1)),a(v,{text:"",onClick:F},{default:o(()=>s[16]||(s[16]=[_("刷新")])),_:1,__:[16]})])]),default:o(()=>[t("div",Ft,[f.value.length===0?(d(),r("div",Lt,[a(O,{description:"暂无活动记录"})])):(d(),r("div",Rt,[(d(!0),r(ot,null,lt(f.value,i=>(d(),r("div",{key:i.id,class:"activity-item"},[t("div",zt,[a(w,{color:U(i.type)},{default:o(()=>[(d(),nt(it(S(i.type))))]),_:2},1032,["color"])]),t("div",Ot,[t("div",Pt,n(i.title),1),t("div",Qt,n(i.description),1),t("div",$t,n(c(k)(i.createdAt)),1)])]))),128))]))])]),_:1})])):(d(),r("div",Jt,[a(P,{icon:"warning",title:"用户不存在","sub-title":"该用户可能已被删除或不存在"},{extra:o(()=>[a(v,{type:"primary",onClick:h},{default:o(()=>s[18]||(s[18]=[_("返回用户列表")])),_:1,__:[18]})]),_:1})]))])}}},Yt=dt(jt,[["__scopeId","data-v-eb983d2f"]]);export{Yt as default};
